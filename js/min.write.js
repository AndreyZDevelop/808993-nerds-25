var write=document.querySelector(".popup"),popup=document.querySelector(".modal"),close=document.querySelector(".modal-close"),myName=popup.querySelector("[name=name"),myEmail=popup.querySelector("[name=email]"),myLetter=popup.querySelector("[name=comment]"),nameStorage=localStorage.getItem("name"),emailStorage=localStorage.getItem("email"),form=popup.querySelector("form"),isStorageSupport=!0,firstStorage="",secondStorage="";try{firstStorage=localStorage.getItem("name"),secondStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}write.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),nameStorage||emailStorage?(myName.value=nameStorage,myEmail.value=emailStorage,myLetter.focus()):myName.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show")}),form.addEventListener("submit",function(e){myName.value&&myEmail.value&&myLetter.value?isStorageSupport&&(localStorage.setItem("name",myName.value),localStorage.setItem("email",myEmail.value)):(e.preventDefault(),myName.value||myName.classList.add("modal-error"),myEmail.value||myEmail.classList.add("modal-error"),myLetter.value||myLetter.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("modal-show")&&(e.preventDefault(),popup.classList.remove("modal-show"))});